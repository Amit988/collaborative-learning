{% extends 'accounts/base.html' %}
{% load crispy_forms_tags %}
{% block title %}{{course.title}}{% endblock %}
{% load humanize %}
{% load static %}

{% block script %}

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{% static 'accounts/css/style.css' %}">

<style type="text/css">
  
  .iframe-container{
  position: relative;
  width: 100%;
  padding-bottom: 56.25%; 
  height: 0;
}
.iframe-container iframe{
  position: absolute;
  top:0;
  left: 0;
  width: 100%;
  height: 100%;
}

#load{
    width:100%;
    height:100%;
    position:fixed;
    z-index:9999;
    background:url("{% static 'courses/787.gif' %}") no-repeat center center;
}
</style>

<script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=613337eb495f05001236fe40&product=inline-share-buttons' async='async'></script>

{% endblock %}



{% block main %}


<div id="load"></div>

<div class="container text-center mb-5 mt-5" id = "contents">  


  
    <div class="row">
      <div class="col-sm-3">

        <div class="card mt-2 mb-2 bg-dark text-white">
          
          <div class="card-body">

            <h4 class="card-subtitle mb-2 text-white"><i class="fa fa-line-chart"></i> Lessons</h4>

            <p>

              {% for i in lessons %}


                <li><a href="{% url 'courses:lesson-video' i.video_url i.course.id i.id  %}" class="text-white" style="text-decoration: none;">Lesson {{i.lesson_no}}</a></li>

              {% endfor %}

            </p>

            <h4 class="card-subtitle mt-2 mb-2 text-white">Course</h4>
            <a href="{% url 'courses:lesson-view' course.id  %}" class="mb-3">{{course.title}}</a>


            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header text-center">
                    <h5 class="modal-title text-dark" id="staticBackdropLabel">Ask Doubts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">

                    <form class="p-4 p-md-5 border rounded-3 bg-light" action="{% url 'courses:add-course-qna' course.id %}" enctype="multipart/form-data" method="post">

                      {% csrf_token %}

                      <div class="form-floating mb-3">
                        <input type="text" id="defaultForm" class="form-control text-dark" name="title" required placeholder="Title">
                        <label data-error="wrong" data-success="right" for="defaultForm" class="text-dark">Title</label>
                      </div>

                      <div class="form-floating mb-3">

                        <input type="text" id="floatingSelect" class="form-control text-dark" name="tag" required placeholder="web-development, front-end, HTML...">
                        <label for="floatingSelect" class="text-dark">Tags(HTML, CSS, CP...)</label>

                      </div>


                      <div class= "mb-3 text-dark form-floating">

                        
                        <textarea id="summernote" name="details" class="form-control" required placeholder="details"></textarea>
                        <!--<label data-error="wrong" data-success="right" for="summernote">Detailed Description</label>-->
                        
                      </div>

                      <div class="text-center">
                        <button type="submit" class="filled-button mb-5 mt-3">Ask Doubts.</button>
                      </div>

                    </form>
                    
                  </div>
                </div>
              </div>
            </div>


            <!-- Button trigger modal -->
            <div class="text-center">


              <a class="filled-button text-decoration-none mb-4 mt-3 " class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                Ask Doubts
              </a>
              
            </div>

          </div>
        </div>

      </div>
      <div class="col-sm-9">

        <div  class ="iframe-container">

          <iframe width="560" height="315" src="https://www.youtube.com/embed/{{video_link}}" title="Cosb video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          
        </div>


        <a class="text-decoration-none mt-2" type="button" data-toggle="collapse" data-target="#resources-box" aria-expanded="false" aria-controls="resources-box">
        <i class="fa fa-plus"></i> Extra Resourses
        </a>
        <div class="collapse" id="resources-box">



            <div class="card card-body my-2">

              {% if lesson.resources %}
                <p>{{lesson.resources|safe}}</p>

              {% else %}

                <P>No resourses provided yet.</P>

              {% endif %}

              {% if lesson.quiz %}
                <h6>Quiz</h6>
                <a href="/quiz/{{lesson.quiz.id}}">{{lesson.quiz.name}}</a>
              {% endif %}

              <div class="">

                <a href="{% url 'courses:course-qna' course.id %} " class="filled-button mb-5 mt-3" style="text-decoration: none;">FAQS</a>
                
              </div>
              
                
            </div>
            


        </div>
        

      </div>

   
  </div>


</div>

<div class="container">

  <div class="row mt-5 mb-5">

    <h4 class="display-5 fw-bold lh-1 mb-5 mt-5 text-center">How was this lesson?</h4>
    <div class="sharethis-inline-reaction-buttons"></div>
  </div>

  <!-- begin wwww.htmlcommentbox.com -->
  <div class="mt-3">

    <div id="HCB_comment_box">loading comments...</div>
    
  </div>
   
   <link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/bootstrap/twitter-bootstrap.css?v=0" />
   <script type="text/javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={};} (function(){var s=document.createElement("script"), l=hcb_user.PAGE || (""+window.location).replace(/'/g,"%27"), h="https://www.htmlcommentbox.com";s.setAttribute("type","text/javascript");s.setAttribute("src", h+"/jread?page="+encodeURIComponent(l).replace("+","%2B")+"&mod=%241%24wq1rdBcg%24smQFpSrElVLoyPCVmkxue%2F"+"&opts=16798&num=10&ts=1637649470319");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
  <!-- end www.htmlcommentbox.com -->
  
</div>



<script>
  $('#summernote').summernote({
    placeholder: 'Your Question here!',
    tabsize: 2,
    height: 100,

  });
</script>

{% endblock%}


{% block ajaxbox %}

  <script type="text/javascript">
    
    document.onreadystatechange = function () {
    var state = document.readyState
    if (state == 'interactive') {
         document.getElementById('contents').style.visibility="hidden";
    } else if (state == 'complete') {
        setTimeout(function(){
           document.getElementById('interactive');
           document.getElementById('load').style.visibility="hidden";
           document.getElementById('contents').style.visibility="visible";
        },1000);
    }
  }

  </script>


{% endblock ajaxbox %}
